import{_ as x,c as p,o as d,a as H,b as s,t as h,n as J,r as O,d as Q,u as k,i as U,e as V,f as S,w as z,g as T,h as v,j as A,k as y,l as o,v as f,m as K,T as R,p as C,F as G,q as j,s as W,x as X,y as Y,z as Z,A as tt}from"./index-D8Jyj9_4.js";import{h as g}from"./http-CZPNIr2s.js";const st={class:"shell"},et={class:"main"},at={class:"progress"},ot={class:"progress-top"},lt={class:"progress-bar"},nt={class:"headline"},it={class:"content"},rt={class:"footer"},ut={__name:"FlowLayout",props:{step:{type:Number,default:1},total:{type:Number,default:5},title:{type:String,default:""},subtitle:{type:String,default:""},progress:{type:Number,default:0}},setup(a){return(t,l)=>(d(),p("div",st,[l[0]||(l[0]=H('<aside class="sidebar" data-v-b92f57e0><div class="brand" data-v-b92f57e0><div class="avatar" data-v-b92f57e0></div><div data-v-b92f57e0><p class="brand-title" data-v-b92f57e0>AI外贸助手</p><p class="brand-sub" data-v-b92f57e0>智能客户开发</p></div></div><nav class="menu" data-v-b92f57e0><button class="menu-item menu-item--active" data-v-b92f57e0><span class="material" data-v-b92f57e0>search</span> 客户开发 </button><button class="menu-item" data-v-b92f57e0><span class="material" data-v-b92f57e0>group</span> 客户管理 </button><button class="menu-item" data-v-b92f57e0><span class="material" data-v-b92f57e0>mail</span> 邮件营销 </button><button class="menu-item" data-v-b92f57e0><span class="material" data-v-b92f57e0>bar_chart</span> 数据分析 </button><button class="menu-item" data-v-b92f57e0><span class="material" data-v-b92f57e0>settings</span> 全局配置 </button></nav></aside>',1)),s("main",et,[s("div",at,[s("div",ot,[s("p",null,"当前进度："+h(a.step)+"/"+h(a.total),1)]),s("div",lt,[s("div",{class:"progress-fill",style:J({width:`${Math.min(100,Math.max(0,a.progress))}%`})},null,4)])]),s("header",nt,[s("h1",null,h(a.title),1),s("p",null,h(a.subtitle),1)]),s("section",it,[O(t.$slots,"default",{},void 0)]),s("footer",rt,[O(t.$slots,"footer",{},void 0)])])]))}},M=x(ut,[["__scopeId","data-v-b92f57e0"]]),dt=async a=>{const{data:t}=await g.post("/companies/resolve",{query:a});return t},ct=async a=>{const{data:t}=await g.post("/companies",a);return t},pt=async(a,t)=>{const{data:l}=await g.put(`/companies/${a}`,t);return l},mt=async(a,t)=>{const{data:l}=await g.post(`/companies/${a}/contacts`,{contacts:t});return l},ht=async a=>{const{data:t}=await g.post(`/companies/${a}/grade/suggest`);return t},yt=async(a,t)=>{const{data:l}=await g.post(`/companies/${a}/grade/confirm`,t);return l},ft=async a=>{const{data:t}=await g.post(`/companies/${a}/analysis`);return t},vt=async(a,t)=>{const{data:l}=await g.put(`/companies/${a}/analysis`,t);return l},_t=async a=>{const{data:t}=await g.post(`/companies/${a}/email-draft`);return t},bt=async(a,t)=>{const{data:l}=await g.put(`/emails/${a}`,t);return l},gt=async(a,t,l="")=>{const{data:n}=await g.post(`/companies/${a}/followup/first-save`,{email_id:t,notes:l});return n},wt=async a=>{const{data:t}=await g.post("/followups/schedule",a);return t},F=Q("flow",{state:()=>({step:1,query:"",resolving:!1,resolveResult:null,contacts:[],summary:"",country:"",website:"",customerId:null,gradeSuggestion:null,gradeFinal:null,analysis:null,emailDraft:null,followupId:null,scheduledTask:null,loading:{grade:!1,analysis:!1,email:!1,followup:!1,schedule:!1}}),actions:{resetFlow(){this.step=1,this.query="",this.resolving=!1,this.resolveResult=null,this.contacts=[],this.summary="",this.country="",this.website="",this.customerId=null,this.gradeSuggestion=null,this.gradeFinal=null,this.analysis=null,this.emailDraft=null,this.followupId=null,this.scheduledTask=null,this.loading={grade:!1,analysis:!1,email:!1,followup:!1,schedule:!1}},async startResolve(a){const t=k();this.resolving=!0,this.query=a;try{const n=(await dt(a)).data||{};if(this.resolveResult=n,this.contacts=(n.contacts||[]).map(i=>({...i})),this.summary=n.summary||"",this.country=n.country||"",this.website=n.website||"",n.customer_id){this.customerId=n.customer_id;const i=(n.grade||"").toUpperCase();i&&i!=="UNKNOWN"?this.gradeFinal={grade:i,reason:n.grade_reason||""}:this.gradeFinal=null,this.analysis=n.analysis?{...n.analysis}:null,this.emailDraft=n.email_draft?{...n.email_draft}:null,this.followupId=n.followup_id||null,this.scheduledTask=n.scheduled_task||null,this.step=Math.max(1,n.last_step||1)}else this.customerId=null,this.gradeFinal=null,this.analysis=null,this.emailDraft=null,this.followupId=null,this.scheduledTask=null,this.step=1;this.gradeSuggestion=null}catch(l){t.pushToast(l.message,"error")}finally{this.resolving=!1}},async saveCompany(a){const t=k(),l={name:a.name,website:a.website||this.website,country:a.country||this.country,summary:a.summary||this.summary,contacts:this.contacts,source_json:this.resolveResult||{}};try{if(this.customerId)await pt(this.customerId,l),t.pushToast("客户信息已更新","success");else{const n=await ct(l);this.customerId=n.data.customer_id,t.pushToast("客户信息已保存","success")}this.website=l.website,this.country=l.country,this.summary=l.summary,this.step=Math.max(this.step,2),this.resolveResult={...this.resolveResult&&typeof this.resolveResult=="object"?this.resolveResult:{},customer_id:this.customerId,name:l.name,website:l.website,country:l.country,summary:l.summary,contacts:(l.contacts||[]).map(n=>({...n})),last_step:Math.max(this.step,2)}}catch(n){t.pushToast(n.message,"error")}},async updateContacts(a){const t=k();if(this.contacts=a,!!this.customerId)try{await mt(this.customerId,a),t.pushToast("联系人已更新","success")}catch(l){t.pushToast(l.message,"error")}},async fetchGrade(){if(!this.customerId)return;const a=k();this.loading.grade=!0;try{const t=await ht(this.customerId);this.gradeSuggestion=t.data}catch(t){a.pushToast(t.message,"error")}finally{this.loading.grade=!1}},async confirmGrade(a,t=""){if(!this.customerId)return;const l=k();try{await yt(this.customerId,{grade:a,reason:t}),this.gradeFinal={grade:a,reason:t},a==="A"?this.step=3:(this.step=5,l.pushToast("非 A 级客户，流程已归档","info"))}catch(n){l.pushToast(n.message,"error")}},async fetchAnalysis(){if(!this.customerId)return;const a=k();this.loading.analysis=!0;try{const t=await ft(this.customerId);this.analysis=t.data,this.step=3}catch(t){a.pushToast(t.message,"error")}finally{this.loading.analysis=!1}},async persistAnalysis(){if(!this.customerId||!this.analysis)return;const a=k();try{await vt(this.customerId,{core_business:this.analysis.core_business,pain_points:this.analysis.pain_points,my_entry_points:this.analysis.my_entry_points,full_report:this.analysis.full_report}),a.pushToast("分析内容已更新","success")}catch(t){a.pushToast(t.message,"error")}},async generateEmail(){if(!this.customerId)return;const a=k();this.loading.email=!0;try{const t=await _t(this.customerId);this.emailDraft=t.data,this.step=4}catch(t){a.pushToast(t.message,"error")}finally{this.loading.email=!1}},async saveInitialFollowup(a=""){if(!this.customerId||!this.emailDraft)return;const t=k();this.loading.followup=!0;try{await bt(this.emailDraft.email_id,{subject:this.emailDraft.subject,body:this.emailDraft.body});const l=await gt(this.customerId,this.emailDraft.email_id,a);this.followupId=l.data.followup_id,this.step=5,t.pushToast("首次跟进记录已保存","success")}catch(l){t.pushToast(l.message,"error")}finally{this.loading.followup=!1}},async createSchedule(a){if(!this.customerId||!this.emailDraft)return;const t=k();this.loading.schedule=!0;try{const l=await wt({customer_id:this.customerId,context_email_id:this.emailDraft.email_id,delay_days:a});this.scheduledTask=l.data,t.pushToast(`已设置 ${a} 天后的自动跟进`,"success")}catch(l){t.pushToast(l.message,"error")}finally{this.loading.schedule=!1}}}}),$t={class:"cards"},kt={class:"query"},It=["disabled"],St=["disabled"],Ct={key:"result",class:"result"},xt={class:"card"},Tt={class:"grid"},Ft={class:"full"},Dt={key:0,class:"candidates"},Nt=["onClick"],Vt={class:"card"},Ut={key:0,class:"contacts"},At=["onUpdate:modelValue"],Rt=["onUpdate:modelValue"],Mt=["onUpdate:modelValue"],qt=["onUpdate:modelValue"],Bt={class:"key"},Gt=["onUpdate:modelValue"],jt=["onClick"],Lt={key:1,class:"placeholder"},Et={class:"footer-actions"},Pt=["disabled"],zt={__name:"StepOne",setup(a){const t=F(),l=U("flowNav",{goNext:()=>{}}),n=V(t.query),i=V({name:"",website:"",country:"",summary:""}),e=V([]),u=S(()=>t.resolveResult?.candidates||[]),_=S(()=>!!t.resolveResult),b=S(()=>{if(!_.value)return!1;const m=(n.value||"").trim(),r=(t.query||"").trim();return m!==r}),L=S(()=>t.resolving?"分析中…":b.value?"开始分析":_.value?"下一步":"开始分析"),q=S(()=>t.resolving?!0:b.value?!n.value:_.value?!i.value.name:!n.value);z(()=>t.resolveResult,m=>{if(!m){i.value={name:t.query||"",website:"",country:"",summary:""},e.value=[];return}i.value={name:m.name||t.query||"",website:m.website||"",country:m.country||"",summary:m.summary||""},e.value=(m.contacts||[]).map(r=>({...r}))},{immediate:!0}),z(()=>t.contacts,m=>{!m||!m.length||(e.value=m.map(r=>({...r})))});const B=async()=>{!n.value||t.resolving||await t.startResolve(n.value)},D=async()=>{i.value.name&&(t.contacts=e.value.map(m=>({...m})),await t.saveCompany({...i.value}),l.goNext?.())},N=async()=>{t.resolving||(b.value||!_.value?await B():await D())},E=()=>{e.value.push({name:"",title:"",email:"",source:"",is_key:e.value.length===0})},w=m=>{e.value.splice(m,1)},I=m=>{m&&(i.value.website=m)};return(m,r)=>(d(),T(M,{step:1,total:5,title:"Step 1: 智能信息获取与聚合",subtitle:"请核对并校准以下 AI 获取的信息，确保其准确性。",progress:20},{footer:v(()=>[s("div",Et,[r[13]||(r[13]=s("button",{class:"ghost",type:"button",disabled:!0},"返回上一步",-1)),s("button",{class:"primary",type:"button",onClick:D,disabled:!i.value.name}," 保存并继续 ",8,Pt)])]),default:v(()=>[s("section",$t,[s("div",kt,[y(s("input",{"onUpdate:modelValue":r[0]||(r[0]=c=>n.value=c),disabled:o(t).resolving,type:"text",placeholder:"输入客户公司全名或官网地址"},null,8,It),[[f,n.value]]),s("button",{class:K(_.value&&!o(t).resolving?"success":"primary"),disabled:q.value,onClick:N},h(L.value),11,St)]),A(R,{name:"fade"},{default:v(()=>[o(t).resolveResult?(d(),p("div",Ct,[s("section",xt,[r[10]||(r[10]=s("header",null,[s("h2",null,"公司信息"),s("p",null,"AI 自动抓取的公司基础信息。")],-1)),s("div",Tt,[s("label",null,[r[5]||(r[5]=s("span",null,"公司名称",-1)),y(s("input",{"onUpdate:modelValue":r[1]||(r[1]=c=>i.value.name=c),type:"text",placeholder:"如：环球贸易有限公司"},null,512),[[f,i.value.name]])]),s("label",null,[r[6]||(r[6]=s("span",null,"公司官网",-1)),y(s("input",{"onUpdate:modelValue":r[2]||(r[2]=c=>i.value.website=c),type:"text",placeholder:"https://example.com"},null,512),[[f,i.value.website]])]),s("label",null,[r[7]||(r[7]=s("span",null,"国家 / 地区",-1)),y(s("input",{"onUpdate:modelValue":r[3]||(r[3]=c=>i.value.country=c),type:"text",placeholder:"United States"},null,512),[[f,i.value.country]])])]),s("label",Ft,[r[8]||(r[8]=s("span",null,"AI 摘要",-1)),y(s("textarea",{"onUpdate:modelValue":r[4]||(r[4]=c=>i.value.summary=c),rows:"4",placeholder:"公司业务概览"},null,512),[[f,i.value.summary]])]),u.value.length?(d(),p("div",Dt,[r[9]||(r[9]=s("h3",null,"候选官网列表",-1)),s("ul",null,[(d(!0),p(G,null,j(u.value,c=>(d(),p("li",{key:c.url},[s("button",{type:"button",class:"link",onClick:P=>I(c.url)},h(c.url),9,Nt),s("small",null,h(c.reason),1)]))),128))])])):C("",!0)]),s("section",Vt,[r[12]||(r[12]=s("header",null,[s("h2",null,"潜在联系人"),s("p",null,"AI 识别到的潜在业务联系人，可继续补充。")],-1)),s("div",{class:"contacts-header"},[s("button",{class:"ghost",type:"button",onClick:E},"新增联系人")]),e.value.length?(d(),p("div",Ut,[(d(!0),p(G,null,j(e.value,(c,P)=>(d(),p("div",{key:P,class:"contact-row"},[y(s("input",{"onUpdate:modelValue":$=>c.name=$,type:"text",placeholder:"联系人姓名"},null,8,At),[[f,c.name]]),y(s("input",{"onUpdate:modelValue":$=>c.title=$,type:"text",placeholder:"职位"},null,8,Rt),[[f,c.title]]),y(s("input",{"onUpdate:modelValue":$=>c.email=$,type:"email",placeholder:"邮箱地址"},null,8,Mt),[[f,c.email]]),y(s("input",{"onUpdate:modelValue":$=>c.source=$,type:"text",placeholder:"社交媒体 / 来源"},null,8,qt),[[f,c.source]]),s("label",Bt,[y(s("input",{type:"checkbox","onUpdate:modelValue":$=>c.is_key=$},null,8,Gt),[[X,c.is_key]]),r[11]||(r[11]=W(" 重点联系人 ",-1))]),s("button",{class:"ghost",type:"button",onClick:$=>w(P)},"删除",8,jt)]))),128))])):(d(),p("div",Lt,"暂无联系人，试着手动添加一个关键联系人。"))])])):C("",!0)]),_:1})])]),_:1}))}},Ot=x(zt,[["__scopeId","data-v-85c1a700"]]),Kt={class:"card"},Wt={key:0,class:"placeholder"},Ht={key:1,class:"content"},Jt=["disabled"],Qt={key:"grade",class:"result"},Xt={class:"grade"},Yt={class:"reason"},Zt={class:"actions"},ts={key:0,class:"status"},ss={key:0},es={class:"footer-actions"},as=["disabled"],os={__name:"StepTwo",setup(a){const t=F(),l=U("flowNav",{}),n=i=>{const e=t.gradeSuggestion?.reason||"";t.confirmGrade(i,e)};return(i,e)=>(d(),T(M,{step:2,total:5,title:"Step 2: AI 辅助客户价值评级",subtitle:"结合评级规则自动给出 A/B/C 建议，可人工调整结果。",progress:40},{footer:v(()=>[s("div",es,[s("button",{class:"ghost",type:"button",onClick:e[4]||(e[4]=u=>o(l).goPrev?.())},"返回上一步"),s("button",{class:"primary",type:"button",disabled:!o(t).gradeFinal||o(t).gradeFinal.grade==="C"||o(t).gradeFinal.grade==="B",onClick:e[5]||(e[5]=()=>o(l).goNext?.())}," 保存并继续 ",8,as)])]),default:v(()=>[s("section",Kt,[o(t).customerId?(d(),p("div",Ht,[s("button",{class:"primary",disabled:o(t).loading.grade,onClick:e[0]||(e[0]=(...u)=>o(t).fetchGrade&&o(t).fetchGrade(...u))},h(o(t).loading.grade?"评估中…":o(t).gradeSuggestion?"重新评估":"获取 AI 评级"),9,Jt),A(R,{name:"fade"},{default:v(()=>[o(t).gradeSuggestion?(d(),p("div",Qt,[s("p",Xt,[e[6]||(e[6]=W("AI 建议等级：",-1)),s("strong",null,h(o(t).gradeSuggestion.suggested_grade),1)]),s("p",Yt,"理由："+h(o(t).gradeSuggestion.reason),1),s("div",Zt,[s("button",{class:"primary",type:"button",onClick:e[1]||(e[1]=u=>n("A"))},"确认 A 级"),s("button",{class:"ghost",type:"button",onClick:e[2]||(e[2]=u=>n("B"))},"调整为 B 级"),s("button",{class:"ghost",type:"button",onClick:e[3]||(e[3]=u=>n("C"))},"调整为 C 级")])])):C("",!0)]),_:1}),o(t).gradeFinal?(d(),p("div",ts,[s("span",null,"当前等级："+h(o(t).gradeFinal.grade),1),o(t).gradeFinal.reason?(d(),p("small",ss,"理由："+h(o(t).gradeFinal.reason),1)):C("",!0)])):C("",!0)])):(d(),p("div",Wt,"请先完成 Step 1 并保存客户信息。"))])]),_:1}))}},ls=x(os,[["__scopeId","data-v-6dbf747d"]]),ns={class:"card"},is={key:0,class:"placeholder"},rs={key:1,class:"content"},us=["disabled"],ds={key:"analysis",class:"analysis-form"},cs={class:"footer-actions"},ps=["disabled"],ms={__name:"StepThree",setup(a){const t=F(),l=U("flowNav",{}),n=async()=>{await t.persistAnalysis(),t.step=Math.max(t.step,4),l.goNext?.()};return(i,e)=>(d(),T(M,{step:3,total:5,title:"Step 3: 生成产品切入点分析",subtitle:"结合客户业务与我方优势，生成可编辑的切入报告。",progress:60},{footer:v(()=>[s("div",cs,[s("button",{class:"ghost",type:"button",onClick:e[5]||(e[5]=u=>o(l).goPrev?.())},"返回上一步"),s("button",{class:"primary",type:"button",onClick:n,disabled:!o(t).analysis}," 保存并继续 ",8,ps)])]),default:v(()=>[s("section",ns,[o(t).step<3?(d(),p("div",is,"请先确认客户为 A 级并完成前两步。")):(d(),p("div",rs,[s("button",{class:"primary",disabled:o(t).loading.analysis,onClick:e[0]||(e[0]=(...u)=>o(t).fetchAnalysis&&o(t).fetchAnalysis(...u))},h(o(t).loading.analysis?"生成中…":o(t).analysis?"重新生成":"生成分析"),9,us),A(R,{name:"fade"},{default:v(()=>[o(t).analysis?(d(),p("div",ds,[s("label",null,[e[6]||(e[6]=s("span",null,"核心业务",-1)),y(s("textarea",{"onUpdate:modelValue":e[1]||(e[1]=u=>o(t).analysis.core_business=u),rows:"3"},null,512),[[f,o(t).analysis.core_business]])]),s("label",null,[e[7]||(e[7]=s("span",null,"潜在痛点",-1)),y(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=u=>o(t).analysis.pain_points=u),rows:"3"},null,512),[[f,o(t).analysis.pain_points]])]),s("label",null,[e[8]||(e[8]=s("span",null,"我方切入点",-1)),y(s("textarea",{"onUpdate:modelValue":e[3]||(e[3]=u=>o(t).analysis.my_entry_points=u),rows:"3"},null,512),[[f,o(t).analysis.my_entry_points]])]),s("label",null,[e[9]||(e[9]=s("span",null,"完整报告",-1)),y(s("textarea",{"onUpdate:modelValue":e[4]||(e[4]=u=>o(t).analysis.full_report=u),rows:"5"},null,512),[[f,o(t).analysis.full_report]])])])):C("",!0)]),_:1})]))])]),_:1}))}},hs=x(ms,[["__scopeId","data-v-d5743f0b"]]),ys={class:"card"},fs={key:0,class:"placeholder"},vs={key:1,class:"content"},_s=["disabled"],bs={key:"email",class:"email-form"},gs={class:"footer-actions"},ws=["disabled"],$s={__name:"StepFour",setup(a){const t=F(),l=U("flowNav",{}),n=async()=>{await t.saveInitialFollowup(),t.step=Math.max(t.step,5),l.goNext?.()};return(i,e)=>(d(),T(M,{step:4,total:5,title:"Step 4: 生成个性化开发信",subtitle:"生成开发信草稿，确认后保存为首次跟进记录。",progress:80},{footer:v(()=>[s("div",gs,[s("button",{class:"ghost",type:"button",onClick:e[3]||(e[3]=u=>o(l).goPrev?.())},"返回上一步"),s("button",{class:"primary",type:"button",disabled:o(t).loading.followup||!o(t).emailDraft,onClick:n},h(o(t).loading.followup?"保存中…":"保存并继续"),9,ws)])]),default:v(()=>[s("section",ys,[o(t).step<4?(d(),p("div",fs,"请先完成切入点分析。")):(d(),p("div",vs,[s("button",{class:"primary",disabled:o(t).loading.email,onClick:e[0]||(e[0]=(...u)=>o(t).generateEmail&&o(t).generateEmail(...u))},h(o(t).loading.email?"生成中…":o(t).emailDraft?"重新生成":"生成开发信"),9,_s),A(R,{name:"fade"},{default:v(()=>[o(t).emailDraft?(d(),p("div",bs,[s("label",null,[e[4]||(e[4]=s("span",null,"邮件标题",-1)),y(s("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>o(t).emailDraft.subject=u),type:"text"},null,512),[[f,o(t).emailDraft.subject]])]),s("label",null,[e[5]||(e[5]=s("span",null,"邮件正文",-1)),y(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=u=>o(t).emailDraft.body=u),rows:"10"},null,512),[[f,o(t).emailDraft.body]])])])):C("",!0)]),_:1})]))])]),_:1}))}},ks=x($s,[["__scopeId","data-v-f5a2ed2f"]]),Is={class:"card"},Ss={key:0,class:"placeholder"},Cs={key:1,class:"content"},xs={class:"quick-buttons"},Ts=["disabled","onClick"],Fs={key:0,class:"info"},Ds={class:"footer-actions"},Ns={__name:"StepFive",setup(a){const t=F(),l=U("flowNav",{}),n=[3,7,14],i=u=>{t.createSchedule(u)},e=u=>u?new Date(u).toLocaleString():"";return(u,_)=>(d(),T(M,{step:5,total:5,title:"Step 5: 设置自动化邮件跟进",subtitle:"选择跟进时间，系统将在到期时自动生成并发送邮件。",progress:100},{footer:v(()=>[s("div",Ds,[s("button",{class:"ghost",type:"button",onClick:_[0]||(_[0]=b=>o(l).goPrev?.())},"返回上一步"),s("button",{class:"primary",type:"button",onClick:_[1]||(_[1]=(...b)=>o(t).resetFlow&&o(t).resetFlow(...b))},"完成并开始下一个")])]),default:v(()=>[s("section",Is,[o(t).step<5?(d(),p("div",Ss,"请先保存首次跟进记录。")):(d(),p("div",Cs,[s("div",xs,[(d(),p(G,null,j(n,b=>s("button",{key:b,class:"ghost",disabled:o(t).loading.schedule,onClick:L=>i(b)},h(b)+" 天后跟进",9,Ts)),64))]),o(t).scheduledTask?(d(),p("div",Fs," 已设置任务，计划发送时间："+h(e(o(t).scheduledTask.due_at)),1)):C("",!0)]))])]),_:1}))}},Vs=x(Ns,[["__scopeId","data-v-6de79a83"]]),Us={class:"layout"},As={class:"carousel"},Rs=["disabled"],Ms={class:"viewport"},qs=["disabled"],Bs={class:"indicator"},Gs={class:"dots"},js=["disabled","onClick"],Ls={__name:"MainFlow",setup(a){const t=Z(),l=F(),n=[{id:1,component:Ot},{id:2,component:ls},{id:3,component:hs},{id:4,component:ks},{id:5,component:Vs}],i=V(0),e=V("forward"),u=S(()=>Math.max(l.step-1,0)),_=S(()=>i.value<u.value),b=S(()=>e.value==="forward"?"slide-left":"slide-right");tt("flowNav",{goPrev:q,goNext:B,goTo:D}),z(()=>l.step,w=>{const I=Math.max(0,w-1);I!==i.value&&(e.value=I>i.value?"forward":"backward",i.value=I)});function q(){i.value!==0&&(e.value="backward",i.value-=1,N())}function B(){_.value&&(e.value="forward",i.value+=1,N())}function D(w){w>u.value||(e.value=w>i.value?"forward":"backward",i.value=w,N())}function N(){const w=i.value+1;w>l.step&&(l.step=w)}const E=()=>{t.push({name:"settings"})};return(w,I)=>(d(),p("div",Us,[s("header",{class:"topbar"},[I[0]||(I[0]=s("div",{class:"title"},"AI 外贸客户开发助手",-1)),s("button",{class:"settings-btn",onClick:E},"设置")]),s("div",As,[s("button",{class:"nav-btn",disabled:i.value===0,onClick:q},"‹",8,Rs),s("div",Ms,[A(R,{name:b.value,mode:"out-in"},{default:v(()=>[(d(),T(Y(n[i.value].component),{key:n[i.value].id}))]),_:1},8,["name"])]),s("button",{class:"nav-btn",disabled:!_.value,onClick:B},"›",8,qs)]),s("footer",Bs,[s("span",null,"Step "+h(i.value+1)+" / "+h(n.length),1),s("div",Gs,[(d(),p(G,null,j(n,(m,r)=>s("button",{key:m.id,class:K(["dot",{"dot--active":r===i.value,"dot--unlock":r<u.value}]),disabled:r>u.value,onClick:c=>D(r)},null,10,js)),64))])])]))}},zs=x(Ls,[["__scopeId","data-v-4d8710a6"]]);export{zs as default};
